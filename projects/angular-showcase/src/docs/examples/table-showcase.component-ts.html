<span class="hljs-keyword">import</span> { Component, ViewEncapsulation } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

<span class="hljs-meta">@Component</span>({
  selector: <span class="hljs-string">'sbb-table-showcase'</span>,
  templateUrl: <span class="hljs-string">'./table-showcase.component.html'</span>,
  styleUrls: [<span class="hljs-string">'./table-showcase.component.scss'</span>],
  encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> TableShowcaseComponent {
  headers = [
    <span class="hljs-string">'Unternehmen und Land *1'</span>,
    <span class="hljs-string">'Personenkilometer (Mio. Pkm)'</span>,
    <span class="hljs-string">'Nettotonnenkilometer (Mio. Ntkm)'</span>,
    <span class="hljs-string">'Trassenkilometer (Mio. Trkm)'</span>,
    <span class="hljs-string">'Personal (FTE)'</span>
  ];

  <span class="hljs-keyword">private</span> _rows = [
    {
      text1:
        <span class="hljs-string">'Langer Text im Link um zu sehen, wie dieser in der Zelle umbricht. *1'</span>,
      text2: <span class="hljs-string">'6 907'</span>,
      text3:
        <span class="hljs-string">'Langer Text im Link um zu sehen, wie dieser in der Zelle umbricht.'</span>,
      text4: <span class="hljs-string">'Langer Text um zu sehen wie genau die Zelle umbricht'</span>,
      text5: <span class="hljs-string">'24 882'</span>,
      scope: <span class="hljs-string">'row'</span>,
      describedby: <span class="hljs-string">'legend_item_1'</span>
    },
    {
      text1: <span class="hljs-string">'SZDC (CZ) *2'</span>,
      text2: <span class="hljs-string">'-'</span>,
      text3: <span class="hljs-string">'-'</span>,
      text4: <span class="hljs-string">'161'</span>,
      text5: <span class="hljs-string">'17 380'</span>,
      scope: <span class="hljs-string">'row'</span>,
      describedby: <span class="hljs-string">'legend_item_2'</span>
    },
    {
      text1: <span class="hljs-string">'DB AG (DE) *3'</span>,
      text2: <span class="hljs-string">'80 805'</span>,
      text3: <span class="hljs-string">'78 542'</span>,
      text4: <span class="hljs-string">'1 037'</span>,
      text5: <span class="hljs-string">'286 237'</span>,
      scope: <span class="hljs-string">'row'</span>,
      describedby: <span class="hljs-string">'legend_item_3'</span>
    },
    {
      text1: <span class="hljs-string">'FS (IT) *3'</span>,
      text2: <span class="hljs-string">'37 489'</span>,
      text3: <span class="hljs-string">'22 081'</span>,
      text4: <span class="hljs-string">'316'</span>,
      text5: <span class="hljs-string">'72 341'</span>,
      scope: <span class="hljs-string">'row'</span>,
      describedby: <span class="hljs-string">'legend_item_3'</span>
    },
    {
      text1: <span class="hljs-string">'JR (JP) *3'</span>,
      text2: <span class="hljs-string">'244 591'</span>,
      text3: <span class="hljs-string">'20 255'</span>,
      text4: <span class="hljs-string">'693'</span>,
      text5: <span class="hljs-string">'127 989'</span>,
      scope: <span class="hljs-string">'row'</span>,
      describedby: <span class="hljs-string">'legend_item_3'</span>
    },
    {
      text1: <span class="hljs-string">'NS (NL) *1'</span>,
      text2: <span class="hljs-string">'16 604'</span>,
      text3: <span class="hljs-string">'-'</span>,
      text4: <span class="hljs-string">'-'</span>,
      text5: <span class="hljs-string">'7 959'</span>,
      scope: <span class="hljs-string">'row'</span>,
      describedby: <span class="hljs-string">'legend_item_1'</span>
    }
  ];

  rows = <span class="hljs-keyword">this</span>._rows.slice();

  currentAlignment = <span class="hljs-string">'center'</span>;

  alignments = [<span class="hljs-string">'none'</span>, <span class="hljs-string">'left'</span>, <span class="hljs-string">'center'</span>, <span class="hljs-string">'right'</span>];

  isFirstColumnPinned = <span class="hljs-literal">false</span>;

  removeRow() {
    <span class="hljs-keyword">this</span>.rows.splice(<span class="hljs-keyword">this</span>.rows.length - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
  }

  resetRows() {
    <span class="hljs-keyword">this</span>.rows = <span class="hljs-keyword">this</span>._rows.slice();
  }

  filterTable(evt: <span class="hljs-built_in">any</span>) {
    <span class="hljs-keyword">const</span> value = evt.target.value;

    <span class="hljs-keyword">if</span> (value !== <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">this</span>.rows = <span class="hljs-keyword">this</span>._rows.filter(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (row.text1.indexOf(value) !== <span class="hljs-number">-1</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (row.text2.indexOf(value) !== <span class="hljs-number">-1</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (row.text3.indexOf(value) !== <span class="hljs-number">-1</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (row.text4.indexOf(value) !== <span class="hljs-number">-1</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (row.text5.indexOf(value) !== <span class="hljs-number">-1</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.rows = <span class="hljs-keyword">this</span>._rows.slice();
    }
  }
}
